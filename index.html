<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Borderline Survival Game</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #fff; text-align: center; padding: 20px; }
  h1 { color: #f00; margin-bottom: 10px; }
  #round { font-size: 20px; margin-bottom: 10px; }
  #message { font-size: 18px; margin: 20px 0; }
  #buttons button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
  #timer { font-size: 16px; margin: 10px 0; }
  #survivors { margin-top: 20px; font-size: 14px; color: #0f0; text-align: left; max-height: 200px; overflow-y: auto; }
</style>
</head>
<body>

<h1>Borderline Survival Game</h1>
<div id="round">Round 1</div>
<div id="message">Welcome! 30 players start. Survive to win.</div>
<div id="buttons"></div>
<div id="timer"></div>
<div id="survivors"></div>

<script>
// --- Game Setup ---
let round = 1;
let players = [];
for(let i=1;i<=30;i++) players.push(`Player${i}`);
let eliminatedPlayers = [];

const rounds = [
  {type: 'choice', message: 'Choose a door: A, B, C', options: ['A', 'B', 'C']},
  {type: 'memory', message: 'Memorize this sequence: ðŸŽðŸŒðŸ‡', options: ['ðŸŽðŸŒðŸ‡']},
  {type: 'quiz', message: 'Quick! 25 Ã— 12 = ?', options: ['300', '250', '320']},
  {type: 'random', message: 'Hidden trap! Some players will fail...', options: ['Survive','Fail']},
  {type: 'vote', message: 'Vote to eliminate one player', options: ['Player1','Player2','Player3']},
  {type: 'puzzle', message: 'Riddle: I speak without a mouth. What am I?', options: ['Echo', 'Shadow','Wind']},
  {type: 'random', message: 'Random challenge!', options: ['Flip a coin','Math','Riddle']},
  {type: 'trust', message: 'Paired with a partner. Share info or betray?', options: ['Share','Betray']},
  {type: 'speed', message: 'Type fast: 7-2-9-4', options: ['Done']},
  {type: 'final', message: 'Final riddle: Solve to win!', options: ['Answer1','Answer2','Answer3']}
];

// --- Start Round ---
function startRound(){
  if(players.length <= 1 || round > rounds.length){
    document.getElementById('message').innerText = `ðŸŽ‰ Game Over! Winner: ${players[0] || 'None'}`;
    document.getElementById('buttons').innerHTML = '';
    document.getElementById('timer').innerText = '';
    return;
  }

  const current = rounds[round-1];
  document.getElementById('round').innerText = `Round ${round}`;
  document.getElementById('message').innerText = current.message;

  // Minimal safe continuation inserted by automation: ensure the game script closes so appended UI won't be inside an open <script>.
  document.getElementById('buttons').innerHTML = '';
  // Continue game flow: simple next round button for demo purposes
  const btn = document.createElement('button');
  btn.textContent = 'Next Round (demo)';
  btn.onclick = () => { round++; startRound(); };
  document.getElementById('buttons').appendChild(btn);
}

// Start first round
startRound();
</script>

<!-- Leaderboard UI -->
<section id="sg-leaderboard" style="background:#222;padding:12px;border-radius:8px;margin:20px auto;max-width:640px;text-align:left;">
  <h2 style="color:#ffd700;margin-top:0">Leaderboard</h2>
  <ol id="scoresList" style="padding-left:20px;color:#fff"></ol>

  <div id="submitScore" style="margin-top:10px;display:flex;gap:8px;align-items:center;">
    <input id="playerName" placeholder="Name" maxlength="20" style="flex:1;padding:6px;border-radius:4px;border:1px solid #444;background:#111;color:#fff"/>
    <input id="playerScore" type="number" placeholder="Score" style="width:120px;padding:6px;border-radius:4px;border:1px solid #444;background:#111;color:#fff"/>
    <button id="submitScoreBtn" style="padding:6px 10px;border-radius:4px;background:#0a84ff;border:none;color:#fff;cursor:pointer">Submit</button>
  </div>

  <p style="font-size:12px;color:#aaa;margin-top:8px">Powered by Firebase Firestore (replace firebaseConfig in /leaderboard.js with your app config).</p>
</section>

<!-- Firebase SDKs (compat build for simple integration) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- Leaderboard loader (adds the leaderboard logic) -->
<script src="/leaderboard.js"></script>

</body>
</html>
